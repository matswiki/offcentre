<!doctype html>
<html>
<head>
<title>Rules</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../../extlib/beautify/vkbeautify.0.99.00.beta.js"></script>
<script src="../../extlib/sqlformatter/SQLFormatter.js"></script>
<script src="../../lib/dialog/dialog.js"></script>
<script src="../../lib/za.co.offcentreit.StringUtils.js"></script>
<script src="rules.js"></script>
<link type="text/css" rel="stylesheet" href="../../extlib/bootstrap/bootstrap.max.css"/>
<link type="text/css" rel="stylesheet" href="../../css/style.css"/>

</script>
</head>
<body bgcolor="#E0E0E0" id="body">
  <div class="menuBar">
    <div class="menuItem" style="text-align:center; left:5px; width:350px;">
      Filter:&nbsp;
      <input type="text" id="entityFilterText"/>&nbsp;
      <input type="button" class="glass btn" value="Go" onclick="reloadEntityList()"/>
    </div>
    <div class="menuItem" style="text-align:center; left:365px; width:auto;">
      Entity:&nbsp;
      <select id="entityList" onchange="retrieveEntity()" style="width:200px">
      </select>&nbsp;&nbsp;&nbsp;
    </div>
    <div class="menuItem" style="text-align:center; left:655px; width:auto;">
      Rule:&nbsp;
      <select id="entityRulesList" onchange="retrieveRule()" style="width:200px">
      </select>&nbsp;&nbsp;&nbsp;
    </div>
  </div>
 
  <div class="toolbar">
    <img src="../../images/english.png"  class="toolbarIcon" onclick="showEnglishText()" title="say what?"/>&nbsp;
    <img src="../../images/json.png"  class="toolbarIcon" onclick="showRuleJson()" title="JSON view"/>&nbsp;
    <img src="../../images/sql.png"  class="toolbarIcon" onclick="showRuleSQL()" title="SQL view"/>&nbsp;
  </div>
 
  <div id="messageDefinition" class="contentPane whiteBar" style="display:block;">
    <div class="dialogHeader blueBar">
      <div class="dialogHeaderTitle">Create Rule for <b id="titleEntityName"></b></div>
      <div class="dialogHeaderCloser">
        <input type="button" class="glass btn" value="Save Rule as" onclick="saveEntityRule('entityRuleName')"/>&nbsp;
        <input type="text" id="entityRuleName"/>&nbsp;
      </div>
    </div>
    <div class="dialogContent whiteBar">
      <table style="width:100%;">
      <thead>
        <tr>
          <th style="width:60%;">
            
            <h4>&nbsp;Conditions</h4>
            &nbsp;&nbsp;
            When <b id="conditionEntityName"></b> matches
            <br/>
            &nbsp;&nbsp;
            <select id="entityPropertyList" style="width:200px;"></select>&nbsp;
            <select id="operatorList" style="width:200px;"></select>&nbsp;
            <input type="text" id="propertyValue"/>&nbsp;
            <input type="button" class="glass btn" value="Add" onclick="addCondition()"  title="Add simple condition"/>&nbsp;
          </th>
          <th style="width:40%">
            <h4>&nbsp;Actions</h4>
            &nbsp;&nbsp;
            Do the following
            <br/>
            &nbsp;&nbsp;
            <select id="actionList" style="width:200px;"></select>&nbsp;
            <input type="button" class="glass btn" value="Add" onclick="addAction()"/>
          </th>
        </tr>
      <thead>
      <tr>
        <td class="top">
          <table id="conditionsTable">
          </table>
        </td>
        <td class="top">
          <table id="actionsTable">
          </table>
        </td>
      </tr>
      </table>
    </div>
    <br/><br/><br/>
 </div>
   
 <div id="infoDialog" class="dialogDivOverlay">
    <div id="infoDialogDiv" class="dialogDiv" style="width:40%; height:150px; top:200px; left:40%;">
      <div class="dialogHeader greenBar">
        <img src="../../images/thumbsup.png" class="dialogIcon"/>
        <div class="dialogHeaderTitle"></div>
        <div class="dialogHeaderCloser"><img src="../../images/close.png" class="closeButton" onclick="closeDialog('infoDialog')"/></div>
      </div>
      <div class="dialogContent center" id="infoDialogContent"></div>
    </div>
 </div> 

 <div id="errorDialog" class="dialogDivOverlay">
    <div id="infoDialogDiv" class="dialogDiv" style="width:40%; height:150px; top:200px; left:40%;">
      <div class="dialogHeader redBar">
        <img src="../../images/error.png" class="dialogIcon"/>
        <div class="dialogHeaderTitle"></div>
        <div class="dialogHeaderCloser"><img src="../../images/close.png" class="closeButton" onclick="closeDialog('errorDialog')"/></div>
      </div>
      <div class="dialogContent center" id="errorDialogContent"></div>
    </div>
 </div> 
 
 <div id="areYouSureDialog" class="dialogDivOverlay">
    <div id="areYouSureDialogDiv" class="dialogDiv" style="width:40%; height:200px; top:200px; left:40%;">
      <div class="dialogHeader redBar">
        <img src="../../images/question.png" class="dialogIcon"/>
        <div class="dialogHeaderTitle">Warning</div>
        <div class="dialogHeaderCloser">
          <img src="../../images/close.png" class="closeButton" onclick="closeDialog('areYouSureDialog')"/>
        </div>
      </div>
      <div id="areYouSureDialogContent" class="dialogContent center">
        <br/>
        <span id="areYouSureMessage">Do you want to delete selected record?</span>
        <br/>
      </div>
      <div class="dialogFooter center">
          <input type="button" id="IamSureButton" class="glass btn blue" value="Yes"/>
      </div>
    </div>
  </div> 

  <div id="jsonDialog" class="dialogDivOverlay">
    <div id="jsonDialogDiv" class="dialogDiv" style="left:20px; height:600px; top:10px; width:800px;">
      <div class="dialogHeader blueBar" onmousedown="dragQueen.startMoving(this.parentNode,this.parentNode.parentNode,event);" onmouseup="dragQueen.stopMoving(this.parentNode.parentNode);">
        <img src="../../images/json.png" class="dialogIcon"/>
        <div class="dialogHeaderTitle" id="jsonDialogTitle"></div>
        <div class="dropDownMenuItem" style="right:100px;">
          <div>Options</div><br/>
          <div class="menuLink" onclick="minifyJSON('jsonTextArea')">Minify</div>
          <div class="menuLink" onclick="formatJSON('jsonTextArea')">Format</div>
        </div>
        <div class="dialogHeaderCloser">
          <img src="../../images/close.png" class="closeButton" onclick="closeDialog('jsonDialog')"/>
        </div>
      </div>
      <div id="jsonDialogContent" class="dialogContent center">
        <textarea id="jsonTextArea" style="width:100%; height:95%;resize:none;"></textarea>
      </div>
    </div>
  </div> 

  <div id="englishDialog" class="dialogDivOverlay">
    <div id="englishDialogDiv" class="dialogDiv" style="left:20px; height:500px; top:10px; width:500px;">
      <div class="dialogHeader blueBar" onmousedown="dragQueen.startMoving(this.parentNode,this.parentNode.parentNode,event);" onmouseup="dragQueen.stopMoving(this.parentNode.parentNode);">
        <img src="../../images/english.png" class="dialogIcon"/>
        <div class="dialogHeaderTitle" id="englishDialogTitle"></div>
        <div class="dialogHeaderCloser">
          <img src="../../images/close.png" class="closeButton" onclick="closeDialog('englishDialog')"/>
        </div>
      </div>
      <div id="englishDialogContent" class="dialogContent">
        <textarea id="englishTextArea" style="width:100%; height:95%;resize:none; padding:10px; font-size:14px;"></textarea>
      </div>
    </div>
  </div> 

  <div id="sqlDialog" class="dialogDivOverlay">
    <div id="sqlDialogDiv" class="dialogDiv" style="left:50px; height:80%; top:100px; width:80%;">
      <div class="dialogHeader blueBar" onmousedown="dragQueen.startMoving(this.parentNode,this.parentNode.parentNode,event);" onmouseup="dragQueen.stopMoving(this.parentNode.parentNode);">
        <img src="../../images/sql.png" class="dialogIcon"/>
        <div class="dialogHeaderTitle" id="sqlDialogTitle"></div>
        <div class="dialogHeaderCloser">
          <img src="../../images/close.png" class="closeButton" onclick="closeDialog('sqlDialog')"/>
        </div>
      </div>
      <div id="sqlDialogContent" class="dialogContent">
        <textarea id="sqlTextArea" style="width:100%; height:95%;resize:none; padding:10px; font-size:14px;"></textarea>
      </div>
    </div>
  </div> 
  
  <div id="conditionEditorDialog" class="dialogDivOverlay">
   <div class="dialogDiv" id="fieldEditorDiv" style="width:60%; height:230px; top:100px; left:300px;">
      <div class="dialogHeader blueBar" onmousedown="dragQueen.startMoving(this.parentNode,this.parentNode.parentNode,event);" onmouseup="dragQueen.stopMoving(this.parentNode.parentNode);">
        <img src="../../images/table.png" class="dialogIcon"/>
        <div class="dialogHeaderTitle">Condition Editor</div>
        <div class="dialogHeaderCloser">
          <img src="../../images/close.png" class="closeButton" onclick="closeDialog('conditionEditorDialog')"/>
        </div>
      </div>
      <div id="conditionEditorDialogContent" class="dialogContent">
        <br/>
        <table style="width:100%">
        <thead>
          <tr>
            <td style="width:40%">
              property<br/>
              <input type="text" id="editor_property" value="" style="width:98%"/>
              <input type="text" id="editor_propertyType" readonly="true" value="" class="hidden"/><br/>
              <input type="text" id="editor_propertySize" readonly="true" value="" class="hidden"/>
            </td>
            <td style="width:30%">
              operator<br/>
              <select id="editor_operator"  style="width:98%"></select>
            </td>
            <td style="width:30%">
              value<br/>
              <input type="text" id="editor_propertyValue" value=""/>
            </td>
          </tr>
        </thead>
        </table>
      </div>
      <div class="dialogFooter center">
        <input type="button" class="glass btn green" value="Save" onclick="saveCondition()"/>
      </div>
   </div>
  </div>
  
  <script>
    initialise();
  </script>
  
</body>
</html>

